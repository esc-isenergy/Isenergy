@model IsEnergyModel.Subscribers
@{
    ViewBag.Title = "Детали";
}
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>
 @Html.DevExpress().PageControl(PageControlsettings =>{
    PageControlsettings.Name = "PrivateOfficeSubscriberDetails";
    PageControlsettings.TabPages.Add("Реквизиты").SetContent(() =>
    {
       
        using (Html.BeginForm(null,null, FormMethod.Post, new { id = "SubscriberPrivateEdit" }))
        {
            if((Model.TypeElementAbonent == 1) && (Model.LegalEntities.Count!=0))
            {
                Html.RenderPartial("PrivateOfficeSubscriber/RequisiteLegalEntitied", Model.LegalEntities.First());  
            }
            else if ((Model.TypeElementAbonent == 2) && (Model.SoleTraders.Count != 0))
            {
                Html.RenderPartial("PrivateOfficeSubscriber/RequisiteSoleTrader", Model.SoleTraders.First());
            }
            else if ((Model.TypeElementAbonent == 3) && (Model.PhysicalPersons.Count != 0))
            {
                Html.RenderPartial("PrivateOfficeSubscriber/RequisitePhysicalPerson", Model.PhysicalPersons.First());
            }
        }
    });
    if (IsEnergyModel.Filters.AuthorizeMeAll.GetCurrentAppointChiefSubscriber(User.Identity.Name) == true)
    {
        if (Model.TypeElementAbonent != 3)
        {
       
            PageControlsettings.TabPages.Add("Подразделения").SetContent(() =>
            {
                ViewData["IdentifierSubscriber"] = Model.IdentifierSubscriber ;
                Html.RenderPartial("~/Views/Subscriber/Subdivision/Subdivision.cshtml", new { IdentifierSubscriber = Model.IdentifierSubscriber });
                        
            });
            PageControlsettings.TabPages.Add("Сотрудники").SetContent(() =>
            {
                Html.RenderAction("CoWorker", "Subscriber", new { IdentifierSubscriber = Model.IdentifierSubscriber });

            });  
        }
    
        PageControlsettings.TabPages.Add("Сервисы").SetContent(() =>
        {
            Html.RenderPartial("~/Views/Subscriber/PrivateOfficeSubscriber/Services.cshtml");
        });
     
  }
}).GetHtml() 
<div class ="Back">@Html.ActionLink("Назад", "Index")</div>
