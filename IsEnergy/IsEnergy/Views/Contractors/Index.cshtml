@model IsEnergyModel.Contractors
@{
    ViewBag.Title = "Index";
}
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive.min.js")" type="text/javascript"></script>
<script src="@Url.Content("~/Scripts/jquery.validate.unobtrusive-ajax.js")" type="text/javascript"></script>
<script type="text/javascript">    
    function ApplyContractorFunc(s, e) {
        $.post('/Contractors/ApplyContractors', { IdContractor: s.GetRowKey(e.visibleIndex) }, function (data) {
            $('#InputInvitationArea').html(data);
            $.post('/Contractors/GridViewPartial', function (data) {
                $('#MyContragentsGridView').html(data);
                $.post('/Contractors/GridViewPartialOutputInvitation', function (data) {
                    $('#OutputInvitationArea').html(data);
                });
            });
        });
    }
    function FailContractorFunc(s, e) {
        $.post('/Contractors/FailContractors', { IdContractor: s.GetRowKey(e.visibleIndex) }, function (data) {
            $('#InputInvitationArea').html(data);
            $.post('/Contractors/GridViewPartial', function (data) {
                $('#MyContragentsGridView').html(data);
                $.post('/Contractors/GridViewPartialOutputInvitation', function (data) {
                    $('#OutputInvitationArea').html(data);
                });
            });
        });
    }
    function CancelContractorFunc(s, e) {    
        $.post('/Contractors/CancelContractors', { IdContractor: s.GetRowKey(e.visibleIndex) }, function (data) {          
            $('#OutputInvitationArea').html(data); 
            $.post('/Contractors/GridViewPartialInputInvitation', function (data) {
                $('#InputInvitationArea').html(data);
            });
        });
    }
</script>
@Html.DevExpress().PageControl(PageControlsettings =>{
    PageControlsettings.Name = "ContragentsDetails";
    PageControlsettings.TabPages.Add("Мои контрагенты").SetContent(() =>
    {
        @Html.RenderPartial("~/Views/Contractors/MyContractors.cshtml");
    });   
    PageControlsettings.TabPages.Add("Входящие приглашения").SetContent(() =>
    {
        ViewContext.Writer.Write("<div id=\"InputInvitationArea\" >");
        @Html.RenderAction("GridViewPartialInputInvitation");
        ViewContext.Writer.Write("</div>");
    });
    PageControlsettings.TabPages.Add("Приглашения, ожидающие ответа").SetContent(() =>
    {
        ViewContext.Writer.Write("<div id=\"OutputInvitationArea\" >");
        @Html.RenderAction("GridViewPartialOutputInvitation");
        ViewContext.Writer.Write("</div>");
    });
}).GetHtml() 





